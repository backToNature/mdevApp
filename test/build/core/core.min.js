!function(){function e(e){return"[object Function]"===Object.prototype.toString.call(e)}function t(t,o,i){if(n[t])throw new Error("Module "+t+" has been defined already.");e(o)&&(i=o),n[t]={factory:i,inited:!1,exports:null}}function o(t){var o,r,s,a;if(o=n[t],r={},s={exports:{}},!e(o.factory))throw new Error("Module "+t+" has no factory.");if(a=o.factory.call(void 0,i,r,s),void 0!==a)o.exports=a;else if(s.hasOwnProperty("exports")&&"object"==typeof s.exports&&s.exports instanceof Object==!0){var d,l=!1;for(d in s.exports)s.exports.hasOwnProperty(d)&&(l=!0);l===!1?o.exports=r:o.exports=s.exports}else o.exports=s.exports;o.inited=!0}function i(e){var t;if(t=n[e],!t)throw new Error("Module "+e+" is not defined.");return t.inited===!1&&o(e),t.exports}var n={};t("D:/dev/mdevApp/test/build/core/core.js",function(e,t,o){var i=e("D:/dev/mdevApp/test/build/core/util/data-center.js"),n=e("D:/dev/mdevApp/test/build/core/router/router.js"),r=e("D:/dev/mdevApp/test/build/core/api/api.js"),s=e("D:/dev/mdevApp/test/build/util/query.js");i.set("pageConfig",e("D:/dev/mdevApp/test/build/config.js")),console.log(i.get("pageConfig"));var a=function(t,o){i.get("currentPage")&&i.set("prePage",i.get("currentPage")),r.router||(r.router=n),i.set("currentPage",t),e("D:/dev/mdevApp/test/build/core/router/render.js")(t),e("D:/dev/mdevApp/test/build/core/router/load-module.js")(t,o,r)};History.Adapter.bind(window,"statechange",function(){var e=History.getState(),t=e.data.pageName||"index";a(t,e.data.data)});var d=s.getParams(location.search,"pageName")||"index";a(d,{firstRender:!0})}),t("D:/dev/mdevApp/test/build/core/util/data-center.js",function(e,t,o){var i={};o.exports={set:function(e,t){var o,n=e.split(":"),r=i;for(o=0;o<n.length;o++)void 0===r[n[o]]&&(r[n[o]]={}),o===n.length-1?r[n[o]]=t:r=r[n[o]];return t},get:function(e){if("/"===e)return i;var t,o=e.split(":"),n=i;for(t=0;t<o.length&&(n=n[o[t]],void 0!==n);t++);return n}}}),t("D:/dev/mdevApp/test/build/core/router/router.js",function(e,t,o){var i=e("D:/dev/mdevApp/test/build/core/util/data-center.js"),n=(e("D:/dev/mdevApp/test/build/core/api/api.js"),e("D:/dev/mdevApp/test/build/util/query.js")),r={go:function(e,t,o){o!==!0?History.pushState({pageName:e,data:t},i.get("pageConfig:"+e).title,"?"+n.addParam(location.search,"pageName",e)):History.replaceState({pageName:e,data:t},i.get("pageConfig:"+e).title,"?"+n.addParam(location.search,"pageName",e))},back:function(e){_.isNumber(e)?History.back(e):History.back()},forward:function(e){_.isNumber(e)?History.go(e):History.go()}};o.exports=r}),t("D:/dev/mdevApp/test/build/core/api/api.js",function(e,t,o){var i={};o.exports=i}),t("D:/dev/mdevApp/test/build/util/query.js",function(e,t,o){var i={stringToObject:function(e){var t={};if(e=e.replace(/.*\?/,""),"string"==typeof e){e=decodeURIComponent(e);var o,i,n,r=e.split("&");for(i=0;i<r.length;i++)o=r[i],n=o.indexOf("="),o.length>0&&(0>n?t[o]="":n>0&&(t[o.substring(0,n)]=o.substr(n+1)))}return t},objectToString:function(e){return $.param(e)},addParam:function(e,t,o){e=e.replace(/.*\?/,"");var i=this.stringToObject(e),n={};return n[t]=o,this.objectToString(_.extend(i,n))},getParams:function(e,t){return e=e.replace(/.*\?/,""),this.stringToObject(e)[t]}};o.exports=i}),t("D:/dev/mdevApp/test/build/config.js",function(e,t,o){o.exports={index:{title:"主页",modules:["main-test","footer-test.0"],level:1},tap2:{title:"B",modules:["main-test","footer-test.1"],level:1},tap3:{title:"C",modules:["main-test","footer-test.2"],level:1},tap4:{title:"D",modules:["main-test","footer-test.3"],level:1},"demo-level-2":{title:"2级页",modules:["main-test-level-2"],level:2},"demo-level-3":{title:"3级页",modules:["main-test-level-3"],level:3},newPage:{title:"3级页",modules:["main-test-level-3"],level:3}}}),t("D:/dev/mdevApp/test/build/core/router/render.js",function(e,t,o){var i=e("D:/dev/mdevApp/test/build/core/util/data-center.js"),n=e("D:/dev/mdevApp/test/build/static/tpl.js"),r=function(e){var t=i.get("pageConfig:"+e),o=1===t.level?$(".doc.level-1 .main"):$(".doc.level-2.active .main"),r=i.get("pageConfig:"+i.get("prePage")),s=t;r&&r.level>1&&s.level>1&&(o=$(".doc.level-2").not(".active").find(".main")),o.find('div[node-type="module"]').hide(),o.css("opacity",0),t.modules.forEach(function(e){var t=e.split(".")[0],i=e.split(".")[1]||0,r=n[t],a=o.find('div[node-type="module"]').filter(".module-"+t);s.level>1&&(a=a.length?a:$(".doc.level-2 .main").find('div[node-type="module"]').filter(".module-"+t)),a=a.length?a:$(velocityjs.render(r,{status:i})),a.show(),o.append(a)})};o.exports=r}),t("D:/dev/mdevApp/test/build/core/router/load-module.js",function(e,t,o){var i=e("D:/dev/mdevApp/test/build/core/util/data-center.js"),n=$.cookie("debug_cookie"),r=e("D:/dev/mdevApp/test/build/core/router/module.js"),s=function(t,o,s){var a=i.get("pageConfig:"+t),d=0,l=1===a.level?$(".doc.level-1 .main"):$(".doc.level-2.active .main"),c=_.map(a.modules,function(e){return e.split(".")[0]}),u=_.difference(c,i.get("readyModule")),p=a,v=i.get("pageConfig:"+i.get("prePage"));v&&v.level>1&&p.level>1&&(l=$(".doc.level-2").not(".active").find(".main")),i.set("readyModule",_.union(c,i.get("readyModule"))),u=_.map(u,function(e){return"./modules/"+e+"/"+e+".js"});var m=function(){"block"===$(".global_loading").css("display")?($(".main").css("opacity",1),e("D:/dev/mdevApp/test/build/core/router/page-animate.js")(t),window.setTimeout(function(){$(".global_loading_w").transition({opacity:0,duration:500,easing:"in-out",complete:function(){$(".global_loading_w").hide()}})},300)):($(".main").css("opacity",1),e("D:/dev/mdevApp/test/build/core/router/page-animate.js")(t))};return u.length?void u.forEach(function(e){var t=_.last(e.split("/")).replace(".js",""),i=l.find('div[node-type="module"]').filter(".module-"+t),a=function(){r.set(t,window.mdevApp.exports(o,i,s,r.get("/"))),d++,d===u.length&&m()};"true"===n?seajs.use([e.replace(".js",".css"),e],a):$.when($.loadCss(e.replace(".js",".css")),$.loadJs(e.replace(".js",".min.js"))).done(a)}):void m()};o.exports=s}),t("D:/dev/mdevApp/test/build/core/router/module.js",function(e,t,o){var i=e("D:/dev/mdevApp/test/build/core/util/data-center.js"),n=($.cookie().debug_cookie,{});o.exports={set:function(e,t){i.get("modules")||i.set("modules",{}),n["export"]=t,i.set("modules:"+e,n)},get:function(e){return"/"===e?i.get("modules"):i.get("modules:"+e)}}}),t("D:/dev/mdevApp/test/build/core/router/page-animate.js",function(e,t,o){var i=e("D:/dev/mdevApp/test/build/core/util/data-center.js"),n=e("D:/dev/mdevApp/test/build/core/util/easing.js"),r=function(){var e=i.get("prePage"),t=i.get("currentPage"),o=i.get("pageConfig:"+e),r=i.get("pageConfig:"+t),s=1===r.level?$(".doc.level-1"):$(".doc.level-2.active"),a=e?1===o.level?$(".doc.level-1"):$(".doc.level-2.active"):void 0;e?1===o.level?1===r.level||($(".doc.level-2").not(".active").css("position","fixed").css("transform","translate3d(100%,0,0)"),n.easeIn(s,a)):1===r.level?n.easeOut(s,a):(s=$(".doc.level-2").not(".active"),a.removeClass("active"),s.addClass("active"),a.show(),s.show(),r.level>=o.level?n.easeIn(s,a):n.easeOut(s,a)):r.level>1&&($(".doc.level-1").css("transform","translate3d(-"+.32*$(window).width()+"px,0,0)").hide(),s.css("transform","translate3d(0,0,0)").css("position","static"),3===r.level&&$(".doc.level-2").not(".active").css("position","static").css("transform","translate3d(-"+.32*$(window).width()+"px,0,0)").hide())};o.exports=r}),t("D:/dev/mdevApp/test/build/core/util/easing.js",function(e,t,o){var i=!1,n=!1,r={easeIn:function(e,t){i=!0,t.transition({transform:"translate3d(-"+.32*$(window).width()+"px,0,0)",duration:300,easing:"in-out",complete:function(){n||e.css("position","static")}}),e.transition({transform:"translate3d(0,0,0)",duration:300,easing:"in-out",complete:function(){n||t.hide()}})},easeOut:function(e,t){n=!0,t.css("position","fixed"),e.show(),t.transition({transform:"translate3d(100%,0,0)",duration:300,easing:"in-out",complete:function(){}}),e.transition({transform:"translate3d(0,0,0)",duration:300,easing:"in-out",complete:function(){n=!1}})}};o.exports=r}),o("D:/dev/mdevApp/test/build/core/core.js")}();